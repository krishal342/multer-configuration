<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multer configuration</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class=" w-full flex flex-col gap-8 justify-center items-center">
    <p class="text-2xl bold mt-5">At backend multer configuration is used to handle files storing.</p>
    <div class=" flex flex-col gap-8 justify-center items-center">

        <h1 class=" text-3xl">Upload your files and get link of files.</h1>
        <form action="/upload" method="post" class="flex flex-col gap-5" enctype="multipart/form-data">

            <input type="file" name="file" class="hidden">

            <div id="plus-sign"
                class="cursor-pointer h-48 w-48 bg-gray-200 flex justify-center items-center p-5 rounded">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="h-full w-full opacity-50" viewBox="0 0 16 16">
                    <path
                        d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
                    <path
                        d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
                </svg>
            </div>
            <div id="file-name" class="w-48">
                <span class="mt-2 text-sm text-gray-700"><i><b>No file is selected.<b></i> </span>
            </div>

            <button type="submit"
                class="cursor-pointer bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
                id="upload-btn"
                disabled
                >Upload</button>
        </form>

    </div>
    <script>
        let plusSign = document.getElementById('plus-sign');
        let fileInput = document.querySelector('input[type="file"]');
        let filename = document.getElementById('file-name');
        let uploadBtn = document.getElementById('upload-btn');

        // When user clicks the plus sign, open file picker
        plusSign.addEventListener('click', () => {
            fileInput.click();
        });

        // When user selects a file, show its name inside the div
        
        fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            filename.innerHTML = `  <span class="mt-2 text-sm text-gray-700">${fileInput.files[0].name} <i><b>is selected.<b></i> </span> `;
            uploadBtn.disabled = false; // activate button
        } else {
            // filename.innerHTML = `  <span class="mt-2 text-sm text-gray-700"><i><b>No file is selected.<b></i> </span> `;
            uploadBtn.disabled = true; // keep disabled
        }
    });

    </script>
</body>

</html>